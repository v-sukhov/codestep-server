--liquibase formatted sql

--changeset sukhov:9

CREATE TABLE T_SUPERTASK_RESULT
(
	SUPERTASK_RESULT_ID			SERIAL PRIMARY KEY,
	SUPERTASK_ID				INTEGER NOT NULL,
	USER_ID						INTEGER NOT NULL,
	TASK_NUM					SMALLINT NOT NULL,
	SUPERTASK_VERSION_NUMBER	INTEGER,
	CONTEST_ID					INTEGER,
	PASSED						BOOLEAN,
	SCORE						SMALLINT,
	TRIES						SMALLINT,
	SAVE_DTM					TIMESTAMP DEFAULT CURRENT_TIMESTAMP	
);

COMMENT ON TABLE T_SUPERTASK_RESULT IS 'Результат по задаче';
COMMENT ON COLUMN T_SUPERTASK_RESULT.SUPERTASK_RESULT_ID IS 'ID записи';
COMMENT ON COLUMN T_SUPERTASK_RESULT.SUPERTASK_ID IS 'ID суперзадачи';
COMMENT ON COLUMN T_SUPERTASK_RESULT.USER_ID IS 'ID пользователя, к которому относится результат';
COMMENT ON COLUMN T_SUPERTASK_RESULT.TASK_NUM IS 'Номер задачи в суперзадаче';
COMMENT ON COLUMN T_SUPERTASK_RESULT.SUPERTASK_VERSION_NUMBER IS 'Номер версии суперзадачи';
COMMENT ON COLUMN T_SUPERTASK_RESULT.CONTEST_ID IS 'ID контеста. Может быть NULL для разработческого тестирования вне контеста';
COMMENT ON COLUMN T_SUPERTASK_RESULT.PASSED IS 'Итоговый вердикт тестирования: решена ли задача';
COMMENT ON COLUMN T_SUPERTASK_RESULT.SCORE IS 'Балл по итогам тестирования';
COMMENT ON COLUMN T_SUPERTASK_RESULT.TRIES IS 'Количество попыток';
COMMENT ON COLUMN T_SUPERTASK_RESULT.SAVE_DTM IS 'Дата и время сохранения протокола';

--rollback drop table T_SUPERTASK_RESULT;